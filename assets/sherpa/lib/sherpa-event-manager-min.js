Sherpa.counter("Sherpa Event Manager");(function(j){var b={},c={},d={},h={},f=[],l=false,k,g;function n(){if(k){return k}var o=["jQuery","MooTools","YUI","Prototype","dojo"];for(var p=0;p<=o.length;p++){if(window[o[p]]){Eve.setFramework(o[p]);return o[p]}}console.error("Eve doesn't support your JavaScript framework.")}function m(p){var o=k||n();return(p)?(k==p.toLowerCase()):k}function a(p,r){if(!window.console){return}var o=l;if(!l){o=false;for(var q=0;q<f.length;q++){if(f[q]==p){o=true}}}if(!o){return}while(p.length<10){p=p+" "}p=p.substring(0,10)+" - ";console.info(p,r)}function e(o,s,r,q){for(var p in i){s[p]=i[p]}for(p in h){s[p]=h[p]}if(m("YUI")){YUI().use("node",function(t){g=t.one;r[q]=o.apply(s)})}else{if(m("dojo")){require(["dojo/NodeList-dom","dojo/NodeList-traverse"],function(t){g=t;r[q]=o.apply(s)})}else{r[q]=o.apply(s)}}}j.Eve={setFramework:function(o){k=(o+"").toLowerCase();if(k=="jquery"){$=jQuery}},debug:function(o){if(o){f.push(o)}else{l=true}},register:function(o,p){a(o,"registered");if(b[o]){throw new Error("Module already exists: "+o)}b[o]=p;return this},extend:function(p,o){h[p]=o},scope:function(p,o){if(c[p]){console.warn("Duplicate namespace: "+p)}e(o,{name:p,namespace:p},c,p)},attach:function(q,t){var o,p=[],s=0;for(s;s<arguments.length;s++){p[p.length]=arguments[s]}o=function(){b[q].apply(this,p.slice(2))};a(q,"attached to "+t);if(d[q+t]){return false}if(!b[q]){console.warn("Module not found: "+q);return false}var r=e(o,{namespace:t,name:q},d,q+t);return true}};var i={listen:function(r,o,v){if(!v){v=o;o=r;r=""}r=r||"";var w=(this.event)?this.find():document.body;var p=this.name,q=(this.namespace+" "+r).trim(),t={};for(var s in this){if(this.hasOwnProperty(s)){t[s]=this[s]}}function u(y,x){a(p,q+":"+o);t.event=y;if(m("MooTools")){y.target=x}if(m("jQuery")){y.target=y.currentTarget}if(m("dojo")){y.target=y.explicitOriginalTarget}v.apply(t,arguments)}if(m("jQuery")){$(w).delegate(q,o,u)}else{if(m("MooTools")){$(w).addEvent(o+":relay("+q+")",u)}else{if(m("YUI")){g(w).delegate(o,u,q)}else{if(m("Prototype")){$(w).on(o,q,u)}else{if(m("dojo")){require(["dojo/on"],function(x){x(w,q+":"+o,u)})}}}}}},find:function(p){var x,v=this.namespace;if(!p||typeof(p)=="string"){p=(p||"").trim()}var y=(this.event)?this.event.target:document.body;if(m("jQuery")){y=jQuery(y)}if(g){y=g(y)}var o={jQuery:["is","parents","find"],MooTools:["match","getParent","getElements"],Prototype:["match","up","select"],YUI:["test","ancestor","all"],dojo:["","closest","query"]};for(var r in o){if(!m(r)){continue}var q=o[r],u=q[0],s=q[1],w=q[2];if(!m("dojo")&&y[u](v)){return y}x=(this.event)?y[s](v):y;return(this.event)?x[w](p):x[w](v+" "+p)}},first:function(p,o){o=(arguments.length==2)?o:this.find(p);if(m("YUI")){o=o.getDOMNodes()}return o[0]},scope:function(p,o){Eve.scope(this.namespace+" "+p,o)},attach:function(o,p){Eve.attach(o,this.namespace+" "+(p||""))}}})(this);if(this.module){this.module.exports=this.Eve}Sherpa.counter("Sherpa Event Manager");